{% capture canonical_url %}{{ site.url }}{{ page.url | replace:'index.html','' }}{% endcapture %}
{% capture dartdocs_url %}https://pub.dev/documentation/{{ site.pkg_name }}/latest/{% endcapture %}
{% assign demo_data = false %}
{% assign demo_component_src_path = false %}
{% for demo in site.data.demos %}
    {% if demo.id == page.data_id %}
    {% assign demo_data = demo %}
    {% endif %}
{% endfor %}
{% capture demo_component_src_path %}{{ site.repo_url }}/blob/{{ site.demo_component_src_branch }}/web/component2/src/demo_components/{% endcapture %}
{% assign page_title_short = false %}
{% assign page_title = false %}
{% assign page_lead = false %}
{% assign page_description = site.description | strip_html | strip_newlines %}
{% if page.title %}
    {% assign page_title_short = page.title %}
    {% capture page_title %}{{ page_title_short }} &middot; {{ site.title }} ({{ site.pkg_name }}){% endcapture %}
{% elsif demo_data.title %}
    {% assign page_title_short = demo_data.title %}
    {% capture page_title %}{{ page_title_short }} &middot; {{ site.title }} ({{ site.pkg_name }}){% endcapture %}
{% else %}
    {% assign page_title_short = site.title %}
    {% capture page_title %}{{ page_title_short }} &middot; {{ site.description | strip_html | strip_newlines }}{% endcapture %}
{% endif %}
{% if page.lead or demo_data.lead %}
    {% capture page_lead %}
        {% if page.lead %}
            {{ page.lead }}
        {% else %}
            {{ demo_data.lead }}
        {% endif %}
    {% endcapture %}
{% endif %}
{% if page.excerpt %}
    {% assign page_description = page.excerpt %}
{% elsif page_lead %}
    {% assign page_description = page_lead %}
{% else %}
    {% assign page_description = site.description_long %}
{% endif %}
{% assign page_description = page_description | strip_html | strip_newlines | lstrip | rstrip | truncate: 160 %}
